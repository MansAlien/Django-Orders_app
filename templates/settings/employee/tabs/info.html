<div class="container" >
  <div class="row">
    <div class="col-md-6">
      <div class="bg-white p-4 mt-4 rounded " style="height: 95%">
        <h5 class="">User Information</h5>
        <ul class="list-group list-group-flush">
          <li class="list-group-item">First Name: {{ user.user.first_name }}</li>
          <li class="list-group-item">Last Name: {{ user.user.last_name }}</li>
          <li class="list-group-item">User Name: {{ user.user.username }}</li>
          <li class="list-group-item">Email: {{ user.user.email }}</li>
          <li class="list-group-item">Active:
            {% if user.user.is_active %}
              <i class="far fa-check-circle" style="color: #63E6BE;"></i>
            {% else %}
              <i class="far fa-times-circle" style="color: #ff0000;"></i> 
            {% endif %}
          </li>
        </ul> 
        <a
          hx-get="{% url 'edit_user' user.user.id %}" hx-target="#dialog"
          href="#" class="btn btn-primary mt-3">
          Edit
        </a>
      </div>
    </div>
    <div class="col-md-6">
      <div class="bg-white p-4 mt-4 rounded " style="height: 95%">
        <h5 class="card-title">Profile Information</h5>
        <ul class="list-group list-group-flush">
          <li class="list-group-item">Job Title: {{ user.job_title.name }}</li>
          <li class="list-group-item">City: {{ user.city.name}}</li>
          <li class="list-group-item">Address: {{ user.address}}</li>
          <li class="list-group-item">Date Of Birth: {{ user.date_of_birth}}</li>
          <li class="list-group-item">Started At: {{ user.start}}</li>
          <li class="list-group-item">Gender: {{ user.get_gender_display }}</li>
          <li class="list-group-item">Age: {{ user.age }}</li>
          <li class="list-group-item">Salary: {{ user.salary }}</li>
        </ul>
        <a
          hx-get="{% url 'edit_user_profile' user.user.id %}" hx-target="#dialog"
          href="#" class="btn btn-primary mt-3">
          Edit
        </a>

        {% block modal %}
        <div id="info_modal" class="modal fade">
          <div id="dialog" class="modal-dialog" hx-target="this"></div>
        </div>
        {% endblock modal %}
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <div class="bg-white p-4 mt-4 rounded " style="height: 95%">
        {% include "settings/employee/tables/job_title_table.html" %}
      </div>
    </div>
    <div class="col-md-6">
      <div class="bg-white p-4 mt-4 rounded " style="height: 95%">
        {% include "settings/employee/tables/salary_table.html" %}
      </div>
    </div>
  </div>
  <br>
</div>

{% block script %}
  <script>
  // Define the modal
  var info_modal = new bootstrap.Modal(document.getElementById("info_modal"));


  htmx.on("htmx:afterSwap", (e) => {
    // Response targeting #dialog => show the modal
    if (e.detail.target.id == "dialog") {
      info_modal.show();
    }
  });

  htmx.on("htmx:beforeSwap", (e) => {
    // Empty response targeting #dialog => hide the modal
    if (e.detail.target.id == "dialog" && !e.detail.xhr.response) {
      info_modal.hide();
      e.detail.shouldSwap = false;
    }
  });

  htmx.on("hidden.bs.modal", () => {
    document.getElementById("dialog").innerHTML = "";
  });

  window.addEventListener('DOMContentLoaded', (event) => {
      // Delay autofocus by 500 milliseconds (adjust the delay as needed)
      setTimeout(() => {
          document.querySelector('#elementToFocus').focus();
      }, 500);
  });
  </script>
{% endblock script %}
